<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<div id='resumoatendimento' class="quebrapagina">
		<p class="sub-titulo1">2. Resumo do Atendimento</p>
		<div id='indicadores'>
			<div id='sem_parada' class="centro">
				<h:outputText value="Estamos trabalhando há " class="formato1" />
				<h:outputText value="#{paradasBean.listaSemParadas.get(0).diasTrabalhados}" class="formato2" />
				<h:outputText value=" dia(s)" class="formato1" />
				<br />
				<h:outputText value="sem paradas operacionais" class="formato1" />
				<br />
				<h:outputText
					value="----------------------------------------------------------------------------------"
					class="formato1" />
				<br />
				<h:outputText value="Evitamos " class="formato1" />
				<h:outputText value="#{paradasBean.listaSemParadas.get(0).paradasEvitadas}" class="formato2" />
				<h:outputText value=" paradas operacionais " class="formato1" />
				<br />
				<h:outputText value=" nos últimos " class="formato1" />
				<h:outputText value=#{paradasBean.listaSemParadas.get(0).diasSemParadas} class="formato2" />
				<h:outputText value=" dias." class="formato1" />
			</div>
			<p>
				<h:outputText value="No mês corrente temos:" />
			</p>
			<h:dataTable value="#{paradasBean.listaResumo}" var="i"
				styleClass="default-table" headerClass="default-table-header"
				rowClasses="default-table-odd-row,default-table-even-row"
				footerClass="default-table-footer"
				columnClasses="celluleLeft,celluleCenter,celluleCenter">

				<h:column>
					<f:facet name="header">Tipo</f:facet>
					<h:outputText value="#{i.tipo}" />
				</h:column>

				<h:column>
					<f:facet name="header">Sigla</f:facet>
					<h:outputText value="#{i.sigla}" />
				</h:column>

				<h:column>
					<f:facet name="header">Quantidade</f:facet>
					<h:outputText value="#{i.qtde}" />
				</h:column>

			</h:dataTable>
			<br />
			<h:outputText
				value="Abaixo podemos acompanhar alguns dados estatísticos do atendimento prestado:" />
		</div>
		<div id='chamados'>
			<p class="sub-titulo2">2.1 Indicadores do Atendimento</p>
			<h:dataTable value="#{atendimentoBean.listaGeral}" var="i"
				styleClass="default-table" headerClass="default-table-header"
				rowClasses="default-table-odd-row,default-table-even-row"
				footerClass="default-table-footer"
				columnClasses="celluleLeft,celluleCenter">

				<h:column>
					<f:facet name="header">Descrição</f:facet>
					<h:outputText value="#{i.texto}" />
				</h:column>

				<h:column>
					<f:facet name="header">Quantidade</f:facet>
					<h:outputText value="#{i.valor}" />
				</h:column>

			</h:dataTable>
			<div id='chamadossolicitantes'>
				<p class="sub-titulo2">2.2 Chamados por Solicitante</p>
				<h:dataTable value="#{atendimentoBean.listaSolicitante}" var="i"
					styleClass="default-table" headerClass="default-table-header"
					rowClasses="default-table-odd-row,default-table-even-row"
					footerClass="default-table-footer"
					columnClasses="celluleLeft,celluleCenter,celluleCenter,celluleCenter,celluleCenter">

					<h:column footerClass="default-table-footer celluleLeft">
						<f:facet name="header">Solicitante</f:facet>
						<h:outputText value="#{i.solictante}" />
						<f:facet name="footer">	Total </f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Abertos</f:facet>
						<h:outputText value="#{i.qtdeAberto}" />
						<f:facet name="footer">#{atendimentoBean.totalChamadosAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Abertos</f:facet>
						<h:outputText value="#{i.porcentoAberto}">
							<f:convertNumber type="percent" />
						</h:outputText>
						<f:facet name="footer">#{atendimentoBean.totalPorcentoAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Fechados</f:facet>
						<h:outputText value="#{i.qtdeFechado}" />
						<f:facet name="footer">#{atendimentoBean.totalChamadosFechados}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Fechados</f:facet>
						<h:outputText value="#{i.porcentoFechado}" />
						<f:facet name="footer">#{atendimentoBean.totalPorcentoFechados}</f:facet>
					</h:column>

				</h:dataTable>
			</div>
			<div id='tipochamado'>
				<p class="sub-titulo2">2.3 Tipo de Chamados</p>
				<h:dataTable value="#{atendimentoBean.listaTipoChamado}" var="i"
					styleClass="default-table" headerClass="default-table-header"
					rowClasses="default-table-odd-row,default-table-even-row"
					footerClass="default-table-footer"
					columnClasses="celluleLeft,celluleCenter,celluleCenter,celluleCenter,celluleCenter">

					<h:column footerClass="default-table-footer celluleLeft">
						<f:facet name="header">Tipo de Chamado</f:facet>
						<h:outputText value="#{i.tipo}" />
						<f:facet name="footer">Total</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Abertos</f:facet>
						<h:outputText value="#{i.qtdeAberto}" />
						<f:facet name="footer">#{atendimentoBean.totalChamadosAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Abertos</f:facet>
						<h:outputText value="#{i.porcentoAberto}" />
						<f:facet name="footer">#{atendimentoBean.totalPorcentoAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Fechados</f:facet>
						<h:outputText value="#{i.qtdeFechado}" />
						<f:facet name="footer">#{atendimentoBean.totalChamadosFechados}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Fechados</f:facet>
						<h:outputText value="#{i.porcentoFechado}" />
						<f:facet name="footer">#{atendimentoBean.totalPorcentoFechados}</f:facet>
					</h:column>
				</h:dataTable>
			</div>
			<div id='chamadoemaberto'>
				<p class="sub-titulo2">2.4 Chamados em Aberto</p>
				<h:dataTable value="#{atendimentoBean.listaChamadoAberto}" var="i"
					styleClass="default-table" headerClass="default-table-header"
					rowClasses="default-table-odd-row,default-table-even-row"
					footerClass="default-table-footer"
					columnClasses="celluleLeft,celluleLeft,celluleLeft,celluleLeft,celluleLeft">

					<h:column>
						<f:facet name="header">ID Chamado</f:facet>
						<h:outputText value="#{i.idChamado}" />
					</h:column>

					<h:column>
						<f:facet name="header">Titulo</f:facet>
						<h:outputText value="#{i.titulo}" />
					</h:column>

					<h:column>
						<f:facet name="header">Data de Abertura</f:facet>
						<h:outputText value="#{i.dataAbertura}" />
					</h:column>

					<h:column>
						<f:facet name="header">Status</f:facet>
						<h:outputText value="#{i.status}" />
					</h:column>

					<h:column>
						<f:facet name="header">Tipo de Chamado</f:facet>
						<h:outputText value="#{i.tipoChamado}" />
					</h:column>
				</h:dataTable>
			</div>
			<div id='chamadofechado'>
				<p class="sub-titulo2">2.5 Chamados em Fechado</p>
				<h:dataTable value="#{atendimentoBean.listaChamadoFechado}" var="i"
					styleClass="default-table" headerClass="default-table-header"
					rowClasses="default-table-odd-row,default-table-even-row"
					footerClass="default-table-footer"
					columnClasses="celluleLeft,celluleLeft,celluleLeft,celluleLeft,celluleLeft">

					<h:column>
						<f:facet name="header">ID Chamado</f:facet>
						<h:outputText value="#{i.idChamado}" />
					</h:column>

					<h:column>
						<f:facet name="header">Titulo</f:facet>
						<h:outputText value="#{i.titulo}" />
					</h:column>

					<h:column>
						<f:facet name="header">Data de Abertura</f:facet>
						<h:outputText value="#{i.dataAbertura}" />
					</h:column>

					<h:column>
						<f:facet name="header">Status</f:facet>
						<h:outputText value="#{i.status}" />
					</h:column>

					<h:column>
						<f:facet name="header">Tipo de Chamado</f:facet>
						<h:outputText value="#{i.tipoChamado}" />
					</h:column>
				</h:dataTable>
			</div>
			<div id='chamadohost'>
				<h:outputScript library="js" name="jquery.js" target="head" />
				<h:outputScript library="js" name="jquery.flot.js" target="head" />
				<h:outputScript library="js" name="jquery.flot.pie.js" target="head" />
				<h:outputStylesheet library="css" name="grafico.css" target="head" />

				<p class="sub-titulo2">2.6 Chamados por Host</p>
				<h:dataTable value="#{atendimentoHostBean.listaHost}" var="i"
					styleClass="default-table" headerClass="default-table-header"
					rowClasses="default-table-odd-row,default-table-even-row"
					footerClass="default-table-footer"
					columnClasses="celluleLeft,celluleCenter,celluleCenter,celluleCenter,celluleCenter">

					<h:column footerClass="default-table-footer celluleLeft">
						<f:facet name="header">Hostname</f:facet>
						<h:outputText value="#{i.hostname}" />
						<f:facet name="footer">Total</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Abertos</f:facet>
						<h:outputText value="#{i.qtdeAberto}" />
						<f:facet name="footer">#{atendimentoHostBean.totalChamadosAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Abertos</f:facet>
						<h:outputText value="#{i.porcentoAberto}" />
						<f:facet name="footer">#{atendimentoHostBean.totalPorcentoAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Fechados</f:facet>
						<h:outputText value="#{i.qtdeFechado}" />
						<f:facet name="footer">#{atendimentoHostBean.totalChamadosFechados}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Fechados</f:facet>
						<h:outputText value="#{i.porcentoFechado}" />
						<f:facet name="footer">#{atendimentoHostBean.totalPorcentoFechados}</f:facet>
					</h:column>

				</h:dataTable>

				<script type="text/javascript">
					//<![CDATA[
					$(function () {	
						dataAbertos = #{atendimentoHostBean.graficoAbertos}
						dataFechados = #{atendimentoHostBean.graficoAbertos}
		
						// graphHost
						$.plot($("#graphHostAbertos"), dataAbertos, 
						{
							series: {
								pie: { 
									show: true
								}
							},
							legend: {
								show: false
							}
						});

						$.plot($("#graphHostFechados"), dataFechados, 
								{
									series: {
										pie: { 
											show: true
										}
									},
									legend: {
										show: false
									}
								});
					});
					//]]> 
				</script>
				<br />
				<div id="graficos">
					<div id="graficoesquerda" class="centro">
						<h:outputText value="Chamados por Host abertos" />
						<div id="graphHostAbertos" class="graph"></div>
					</div>
					<div id="graficodireita" class="centro">
						<h:outputText value="Chamados por Host fechados" />
						<div id="graphHostFechados" class="graph"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</ui:composition>