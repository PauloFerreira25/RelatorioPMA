<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<div id='resumoatendimento'>
		<h:outputText value="2. Resumo do Atendimento" class="sub-titulo1 quebrapagina"/>
		<div id='indicadores'>
			<h:outputText
				value="Estamos trabalhando há
03 dia(s) sem paradas
Operacionais
----------------------------------------------------------------------------------
Evitamos 00 paradas operacionais 
nos últimos 03 dias." />
			<p><h:outputText value="No mês corrente temos:" /></p>
			<h:dataTable value="#{paradasBean.listaResumo}" var="i"
				styleClass="order-table center-table" headerClass="order-table-header"
				rowClasses="order-table-odd-row,order-table-even-row">

				<h:column>
					<f:facet name="header">Tipo</f:facet>
					<h:outputText value="#{i.tipo}" />
				</h:column>

				<h:column>
					<f:facet name="header">Sigla</f:facet>
					<h:outputText value="#{i.sigla}" />
				</h:column>

				<h:column>
					<f:facet name="header">Quantidade</f:facet>
					<h:outputText value="#{i.qtde}" />
				</h:column>

			</h:dataTable>
			<h:outputText
				value="Abaixo podemos acompanhar alguns dados estatísticos do atendimento prestado:" />
		</div>
		<div id='chamados'>
			<h:outputText value="2.1 Indicadores do Atendimento" class="sub-titulo2" />
			<h:dataTable value="#{atendimentoBean.listaGeral}" var="i"
				styleClass="order-table center-table" headerClass="order-table-header"
				rowClasses="order-table-odd-row,order-table-even-row" >

				<h:column>
					<f:facet name="header">Descrição</f:facet>
					<h:outputText value="#{i.texto}" />
				</h:column>

				<h:column>
					<f:facet name="header">Quantidade</f:facet>
					<h:outputText value="#{i.valor}" />
				</h:column>

			</h:dataTable>
			<div id='chamadossolicitantes'>
				<h:outputText value="2.2 Chamados por Solicitante" class="sub-titulo2" />
				<h:dataTable value="#{atendimentoBean.listaSolicitante}" var="i"
					styleClass="order-table center-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-even-row">

					<h:column>
						<f:facet name="header">Solicitante</f:facet>
						<h:outputText value="#{i.solictante}" />
						<f:facet name="footer">Total</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Abertos</f:facet>
						<h:outputText value="#{i.qtdeAberto}" />
						<f:facet name="footer">#{atendimentoBean.totalChamadosAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Abertos</f:facet>
						<h:outputText value="#{i.porcentoAberto}" />
						<f:facet name="footer">#{atendimentoBean.totalPorcentoAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Fechados</f:facet>
						<h:outputText value="#{i.qtdeFechado}" />
						<f:facet name="footer">#{atendimentoBean.totalChamadosFechados}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Fechados</f:facet>
						<h:outputText value="#{i.porcentoFechado}" />
						<f:facet name="footer">#{atendimentoBean.totalPorcentoFechados}</f:facet>
					</h:column>

				</h:dataTable>
			</div>
			<div id='tipochamado'>
				<h:outputText value="2.3 Tipo de Chamados" class="sub-titulo2" />
				<h:dataTable value="#{atendimentoBean.listaTipoChamado}" var="i"
					styleClass="order-table center-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-even-row">

					<h:column>
						<f:facet name="header">Tipo de Chamado</f:facet>
						<h:outputText value="#{i.tipo}" />
						<f:facet name="footer">Total</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Abertos</f:facet>
						<h:outputText value="#{i.qtdeAberto}" />
						<f:facet name="footer">#{atendimentoBean.totalChamadosAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Abertos</f:facet>
						<h:outputText value="#{i.porcentoAberto}" />
						<f:facet name="footer">#{atendimentoBean.totalPorcentoAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Fechados</f:facet>
						<h:outputText value="#{i.qtdeFechado}" />
						<f:facet name="footer">#{atendimentoBean.totalChamadosFechados}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Fechados</f:facet>
						<h:outputText value="#{i.porcentoFechado}" />
						<f:facet name="footer">#{atendimentoBean.totalPorcentoFechados}</f:facet>
					</h:column>
				</h:dataTable>
			</div>
			<div id='chamadoemaberto'>
				<h:outputText value="2.4 Chamados em Aberto" class="sub-titulo2" />
				<h:dataTable value="#{atendimentoBean.listaChamadoAberto}" var="i"
					styleClass="order-table center-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-even-row">

					<h:column>
						<f:facet name="header">ID Chamado</f:facet>
						<h:outputText value="#{i.idChamado}" />
					</h:column>

					<h:column>
						<f:facet name="header">Titulo</f:facet>
						<h:outputText value="#{i.titulo}" />
					</h:column>

					<h:column>
						<f:facet name="header">Data de Abertura</f:facet>
						<h:outputText value="#{i.dataAbertura}" />
					</h:column>

					<h:column>
						<f:facet name="header">Status</f:facet>
						<h:outputText value="#{i.status}" />
					</h:column>

					<h:column>
						<f:facet name="header">Tipo de Chamado</f:facet>
						<h:outputText value="#{i.tipoChamado}" />
					</h:column>
				</h:dataTable>
			</div>
			<div id='chamadofechado'>
				<h:outputText value="2.5 Chamados em Fechado" class="sub-titulo2" />
				<h:dataTable value="#{atendimentoBean.listaChamadoFechado}" var="i"
					styleClass="order-table center-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-even-row">

					<h:column>
						<f:facet name="header">ID Chamado</f:facet>
						<h:outputText value="#{i.idChamado}" />
					</h:column>

					<h:column>
						<f:facet name="header">Titulo</f:facet>
						<h:outputText value="#{i.titulo}" />
					</h:column>

					<h:column>
						<f:facet name="header">Data de Abertura</f:facet>
						<h:outputText value="#{i.dataAbertura}" />
					</h:column>

					<h:column>
						<f:facet name="header">Status</f:facet>
						<h:outputText value="#{i.status}" />
					</h:column>

					<h:column>
						<f:facet name="header">Tipo de Chamado</f:facet>
						<h:outputText value="#{i.tipoChamado}" />
					</h:column>
				</h:dataTable>
			</div>
			<div id='chamadohost'>
				<h:outputScript library="js" name="jquery.js" target="head" />
				<h:outputScript library="js" name="jquery.flot.js" target="head" />
				<h:outputScript library="js" name="jquery.flot.pie.js" target="head" />
				<h:outputStylesheet library="css" name="grafico.css" target="head" />

				<h:outputText value="2.6 Chamados por Host" class="sub-titulo2 center-table" />
				<h:dataTable value="#{atendimentoHostBean.listaHost}" var="i"
					styleClass="order-table center-table" headerClass="order-table-header"
					rowClasses="order-table-odd-row,order-table-even-row">

					<h:column>
						<f:facet name="header">Hostname</f:facet>
						<h:outputText value="#{i.hostname}" />
						<f:facet name="footer">Total</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Abertos</f:facet>
						<h:outputText value="#{i.qtdeAberto}" />
						<f:facet name="footer">#{atendimentoHostBean.totalChamadosAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Abertos</f:facet>
						<h:outputText value="#{i.porcentoAberto}" />
						<f:facet name="footer">#{atendimentoHostBean.totalPorcentoAbertos}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">Quantidade de Chamados Fechados</f:facet>
						<h:outputText value="#{i.qtdeFechado}" />
						<f:facet name="footer">#{atendimentoHostBean.totalChamadosFechados}</f:facet>
					</h:column>

					<h:column>
						<f:facet name="header">% de Chamados Fechados</f:facet>
						<h:outputText value="#{i.porcentoFechado}" />
						<f:facet name="footer">#{atendimentoHostBean.totalPorcentoFechados}</f:facet>
					</h:column>

				</h:dataTable>

				<script type="text/javascript">
					//<![CDATA[
					$(function () {	
						dataAbertos = #{atendimentoHostBean.graficoAbertos}
						dataFechados = #{atendimentoHostBean.graficoAbertos}
		
						// graphHost
						$.plot($("#graphHostAbertos"), dataAbertos, 
						{
							series: {
								pie: { 
									show: true
								}
							},
							legend: {
								show: false
							}
						});

						$.plot($("#graphHostFechados"), dataFechados, 
								{
									series: {
										pie: { 
											show: true
										}
									},
									legend: {
										show: false
									}
								});
					});
					//]]> 
				</script>
				<div id="graficos">
				<h:outputText value="Chamados por Host abertos" />
				<div id="graphHostAbertos" class="graph" ></div>
				<h:outputText value="Chamados por Host fechados" />
				<div id="graphHostFechados" class="graph"></div>
				</div>
			</div>
		</div>
	</div>
</ui:composition>